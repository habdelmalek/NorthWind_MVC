@model IEnumerable<ApplicationLayer.DTOs.EmployeeDTO>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>
<div class="row">
    <div class="col-7">
        <p>
            @Html.ActionLink("Create New", "Create")
        </p>
    </div>
    <div class="col-5">
        @using (Html.BeginForm("Index", "Employees", FormMethod.Get,new { id="frmSearch"}))
        {
            <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
            @Html.TextBox("txtSearch", null, new { @class = "form-control-sm", placeholder = "Search" })
            <button type="submit" value="Search" class="btn btn-info btn-sm">Search</button>

        }
    </div>
</div>


<table class="ttable table-striped table-bordered" id="tblEmployees">
    <tr>
        <th>
            Name
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Title)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.HireDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.BirthDate)
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                @*@Html.FontAwesome(FontAwesomeIconSet.)*@
                @*@Html.FontAwesome(FontAwesomeIconSet.Spinner, FontAwesomeStyles.Spin)*@
                @{
                    var name = item.FirstName + " " + item.LastName;
                }
                @Html.DisplayFor(modelItem => name)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Title)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.HireDate)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.BirthDate)
            </td>
            <td>

                <a href="@Url.Action("Edit", "Employees" ,new { id = item.EmployeeID })" class="btn btn-warning">
                    link text
                    <span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span>
                </a>


                @*@Html.ActionLink("Edit", "Edit", new { id = item.EmployeeID }) |*@
                @Html.ActionLink("Details", "Details", new { id = item.EmployeeID }) |
                @Html.ActionLink("Delete", "Delete", new { id = item.EmployeeID })
            </td>
        </tr>
    }
</table>
@section scripts
{
<script type="text/javascript">

    $(document).ready(function () {
        $('#tblEmployees').dataTable();
    });


    //$(document).ready(function () {
    //    $('#txtSearch').keyup(function () {
    //        var searchCriteria = $('#frmSearch').serialize();
            
    //        $.ajax({
    //            url: 'http://localhost:51947/Employees/',
    //            type:"GET",
    //            dataType: "text",
    //            data: searchCriteria,
    //            success: function (res) {
    //                alert(JSON.stringify(res));
    //            }
    //        }); 
    //    })
    //});
</script>
}

